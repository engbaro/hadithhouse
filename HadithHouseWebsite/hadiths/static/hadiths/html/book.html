<div ng-if="ctrl.error">
  Couldn't load book or the book is not found.
</div>
<div ng-if="!ctrl.error" layout="column" flex layout-fill>
  <h1>
    {{ ctrl.entity.title }}
    <md-icon class="material-icons"
             ng-click="ctrl.startEditing()"
             ng-hide="ctrl.isEditing"
             ng-if="ctrl.$rootScope.user.permissions.change_book">edit
    </md-icon>
    <md-icon class="material-icons"
             ng-click="ctrl.cancelEditing()"
             ng-hide="!ctrl.isEditing || ctrl.addingNew"
             ng-if="ctrl.$rootScope.user.permissions.change_book">cancel
    </md-icon>
    <md-icon class="material-icons"
             ng-click="ctrl.finishEditing()"
             ng-hide="!ctrl.isEditing"
             ng-if="ctrl.$rootScope.user.permissions.change_book">save
    </md-icon>
  </h1>

  <div layout layout-sm="column">
  <md-input-container flex>
    <label>Title</label>
    <input ng-model="ctrl.entity.title" ng-disabled="!ctrl.isEditing"/>
  </md-input-container>
  </div>

  <div layout layout-sm="column">
  <md-input-container flex>
    <label>Brief Description</label>
    <textarea ng-model="ctrl.entity.brief_desc" ng-disabled="!ctrl.isEditing"></textarea>
  </md-input-container>
  </div>

  <div layout layout-sm="column">
  <md-input-container flex>
    <label>Publication Year</label>
    <input ng-model="ctrl.entity.pub_year" ng-disabled="!ctrl.isEditing"/>
  </md-input-container>
  </div>
</div>
<div ng-if="ctrl.entity.id">
  Added on {{ ctrl.entity.added_on }}
  <span ng-if="ctrl.entity.added_by">
    by <hh-selector ids="ctrl.entity.added_by" type="user" read-only="true" single-select="true"
                    ng-if="ctrl.entity.added_by" text-only="true" clickable="true"></hh-selector>
   </span>
</div>
<div ng-if="ctrl.entity.id && ctrl.entity.updated_on !== ctrl.entity.added_on">
  Last updated on {{ ctrl.entity.updated_on }}
  <span ng-if="ctrl.entity.updated_by">
    by <hh-selector ids="ctrl.entity.updated_by" type="user" read-only="true" single-select="true"
                    ng-if="ctrl.entity.updated_by" text-only="true" clickable="true"></hh-selector>
  </span>
</div>
